<ui:FluentWindow x:Class="DisplayRefreshRate.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        Title="DisplayRefreshRate" 
        Height="520" Width="580"
        MinHeight="480" MinWidth="500"
        WindowStartupLocation="CenterScreen"
        ExtendsContentIntoTitleBar="True"
        WindowBackdropType="Mica">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <ui:TitleBar Grid.Row="0" Title="DisplayRefreshRate" ShowMaximize="True" ShowMinimize="True">
            <ui:TitleBar.Icon>
                <ui:SymbolIcon Symbol="Desktop24"/>
            </ui:TitleBar.Icon>
        </ui:TitleBar>

        <!-- Main Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="24,12,24,24">
                
                <!-- Header -->
                <StackPanel Margin="0,0,0,20">
                    <ui:TextBlock Text="DisplayRefreshRate" 
                                  FontTypography="TitleLarge" 
                                  Foreground="{ui:ThemeResource SystemAccentColorPrimaryBrush}"/>
                    <ui:TextBlock Text="Display &amp; Audio Manager" 
                                  FontTypography="Body"
                                  Foreground="{ui:ThemeResource TextFillColorSecondaryBrush}" 
                                  Margin="0,4,0,0"/>
                </StackPanel>

                <!-- Current Status Card -->
                <ui:CardExpander IsExpanded="True" Margin="0,0,0,12">
                    <ui:CardExpander.Header>
                        <StackPanel>
                            <ui:TextBlock Text="Current Status" FontTypography="BodyStrong"/>
                            <ui:TextBlock Text="Display mode information" 
                                          FontTypography="Caption"
                                          Foreground="{ui:ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                    </ui:CardExpander.Header>
                    <ui:CardExpander.Icon>
                        <ui:SymbolIcon Symbol="Desktop24"/>
                    </ui:CardExpander.Icon>
                    
                    <StackPanel Margin="0,8,0,0">
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Text="Refresh Rate:" VerticalAlignment="Center"/>
                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                <ui:TextBlock x:Name="CurrentHzText" 
                                              Text="-- Hz" 
                                              FontTypography="BodyStrong"
                                              Foreground="{ui:ThemeResource SystemAccentColorPrimaryBrush}"
                                              VerticalAlignment="Center"/>
                            </StackPanel>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Text="Display Mode:" VerticalAlignment="Center"/>
                            <ui:Badge x:Name="CurrentModeBadge" 
                                      Grid.Column="1" 
                                      HorizontalAlignment="Left"
                                      Appearance="Success">
                                <ui:TextBlock x:Name="CurrentModeText" Text="Primary" FontTypography="Body"/>
                            </ui:Badge>
                        </Grid>
                    </StackPanel>
                </ui:CardExpander>

                <!-- Display Profiles Card -->
                <ui:CardExpander IsExpanded="True" Margin="0,0,0,12">
                    <ui:CardExpander.Header>
                        <StackPanel>
                            <ui:TextBlock Text="Display Profiles" FontTypography="BodyStrong"/>
                            <ui:TextBlock Text="Audio output and max refresh rate for each mode" 
                                          FontTypography="Caption"
                                          Foreground="{ui:ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                    </ui:CardExpander.Header>
                    <ui:CardExpander.Icon>
                        <ui:SymbolIcon Symbol="SlideSettings24"/>
                    </ui:CardExpander.Icon>
                    
                    <StackPanel Margin="0,8,0,0">
                        <!-- Column Headers -->
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="90"/>
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Text="" Grid.Column="0"/>
                            <ui:TextBlock Text="Audio Device" Grid.Column="1" 
                                          FontTypography="Caption"
                                          Foreground="{ui:ThemeResource TextFillColorSecondaryBrush}"/>
                            <ui:TextBlock Text="Max Hz" Grid.Column="2" 
                                          FontTypography="Caption"
                                          Foreground="{ui:ThemeResource TextFillColorSecondaryBrush}"
                                          HorizontalAlignment="Center"/>
                        </Grid>
                        
                        <!-- Primary Display Row -->
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="90"/>
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Text="Primary:" VerticalAlignment="Center" FontTypography="BodyStrong"/>
                            <ComboBox x:Name="PrimaryAudioCombo" 
                                      Grid.Column="1" 
                                      Margin="0,0,12,0"
                                      SelectionChanged="PrimaryAudioCombo_SelectionChanged"/>
                            <ui:NumberBox x:Name="PrimaryMaxHzBox"
                                          Grid.Column="2"
                                          Width="80"
                                          Minimum="0"
                                          Maximum="360"
                                          SpinButtonPlacementMode="Compact"
                                          ToolTip="0 = no limit"
                                          ValueChanged="PrimaryMaxHzBox_ValueChanged"/>
                        </Grid>
                        
                        <!-- External Display Row -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="90"/>
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Text="External:" VerticalAlignment="Center" FontTypography="BodyStrong"/>
                            <ComboBox x:Name="SecondaryAudioCombo" 
                                      Grid.Column="1"
                                      Margin="0,0,12,0"
                                      SelectionChanged="SecondaryAudioCombo_SelectionChanged"/>
                            <ui:NumberBox x:Name="ExternalMaxHzBox"
                                          Grid.Column="2"
                                          Width="80"
                                          Minimum="0"
                                          Maximum="360"
                                          SpinButtonPlacementMode="Compact"
                                          ToolTip="0 = no limit"
                                          ValueChanged="ExternalMaxHzBox_ValueChanged"/>
                        </Grid>
                    </StackPanel>
                </ui:CardExpander>

                <!-- Hotkeys Card -->
                <ui:CardExpander IsExpanded="True" Margin="0,0,0,12">
                    <ui:CardExpander.Header>
                        <StackPanel>
                            <ui:TextBlock Text="Keyboard Shortcuts" FontTypography="BodyStrong"/>
                            <ui:TextBlock Text="Global hotkeys for quick actions" 
                                          FontTypography="Caption"
                                          Foreground="{ui:ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                    </ui:CardExpander.Header>
                    <ui:CardExpander.Icon>
                        <ui:SymbolIcon Symbol="Keyboard24"/>
                    </ui:CardExpander.Icon>
                    
                    <StackPanel Margin="0,8,0,0">
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Text="Set Max Refresh Rate" VerticalAlignment="Center"/>
                            <ui:Badge Grid.Column="1" Appearance="Info">
                                <ui:TextBlock Text="Ctrl + Alt + F12" FontFamily="Consolas" FontSize="12"/>
                            </ui:Badge>
                        </Grid>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Text="Toggle Display + Audio" VerticalAlignment="Center"/>
                            <ui:Badge Grid.Column="1" Appearance="Info">
                                <ui:TextBlock Text="Ctrl + Alt + F11" FontFamily="Consolas" FontSize="12"/>
                            </ui:Badge>
                        </Grid>
                    </StackPanel>
                </ui:CardExpander>

                <!-- Settings Card -->
                <ui:CardExpander IsExpanded="True" Margin="0,0,0,12">
                    <ui:CardExpander.Header>
                        <StackPanel>
                            <ui:TextBlock Text="Settings" FontTypography="BodyStrong"/>
                            <ui:TextBlock Text="Application preferences" 
                                          FontTypography="Caption"
                                          Foreground="{ui:ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                    </ui:CardExpander.Header>
                    <ui:CardExpander.Icon>
                        <ui:SymbolIcon Symbol="Settings24"/>
                    </ui:CardExpander.Icon>
                    
                    <Grid Margin="0,8,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <ui:TextBlock Text="Run on Startup" VerticalAlignment="Center"/>
                            <ui:TextBlock Text="Start automatically when Windows starts" 
                                          FontTypography="Caption"
                                          Foreground="{ui:ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                        <ui:ToggleSwitch x:Name="StartupToggle" 
                                         Grid.Column="1" 
                                         VerticalAlignment="Center"
                                         Checked="StartupToggle_Toggled"
                                         Unchecked="StartupToggle_Toggled"/>
                    </Grid>
                </ui:CardExpander>

                <!-- Action Buttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
                    <ui:Button Content="Set Max Hz" 
                               Icon="{ui:SymbolIcon Gauge24}"
                               Appearance="Secondary"
                               Click="SetMaxHz_Click" 
                               Margin="0,0,12,0"/>
                    <ui:Button Content="Toggle Display" 
                               Icon="{ui:SymbolIcon DesktopArrowRight24}"
                               Appearance="Primary"
                               Foreground="White"
                               Click="ToggleDisplay_Click"/>
                </StackPanel>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</ui:FluentWindow>
